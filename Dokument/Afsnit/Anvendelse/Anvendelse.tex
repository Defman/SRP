\documentclass[../../SRP.tex]{subfiles}

\begin{document}

\chapter{Monte Carlo Lokalisering}
Dette afsnit vil komme ind på hvordan en autonom robot kan implementere en Monte Carlo Algoritme for således at kunne lokalisere sig selv på et kendt kort. Denne Metoder er også kaldet Monte Carlo Lokalisering, og kræver  

Hvis vi tager tager udgangspunkt i en autonom robot, der er har fire hjul og mindst to elektriske motorer med enkoder. Elektriske motorer med enkoder afgiver et elektrisk signal $n$ gange per total rotation af motorens akse, dette kunne være implementer ved brug af en hall sensor der måler på en magnet eller en optisk sensor der måler på et optisk gitter som der følger aksen. Således at robotten er i stand til at udregne hvor langt den har bevæget sig i en given retning. Denne længde kan udregnes, lad i denne udregning $d$ være diameteren af robottens hjul samt $n$ antallet af impulser per rotation samt $n_t$ værende et antal impulser målt efter en given tid. Længden $L$ som robotten har bevægede sig ved antallet målte impulser $n_t$ kan således udregnes på følgende måde:
\begin{equation}
  L = d \times \pi \times \frac{n_t}{n}
\end{equation}
Et eksempel på overstående formel, kunne være at robotten havde et sæt hjul med diameteren $5cm$ altså $d = 5cm$ samt en hallsensor der giver $20$ impulser per totale rotation af aksen, når robotten har bevægede sig $4512$ impulser kan vi udregne den længde robotten har bevægede sig:
\begin{equation}
  L = 5cm \times \pi \times \frac{4512}{20} = 3543.71cm = 35.4371m
\end{equation}
Vi kan også udregne vinklen $\theta$ for robotten, da dette er en simpel implementering af Dead-reckoning vil vi kun udføre rotationer, når robotten står stille.

Desuden har robotten en sensor der er placeret under den, denne sensoren måler farven af hvad robotten bevæger sig på. Sensoren måler et resultat på formen $(r,g,b)$, hvor $(0,0,0)$ vil være sort og $(255,0,0)$ ville være en rød farve. 

Med et udgangspunk i overstående robot der implementer et Dead-reckoning algoritme, kan vi lokalisere robotten på et kendt kort ved brug af Monte Carlo Lokalisering. Det kendte kort i dette konkrete eksempel er et kort der er kvadratisk af $20 \times 20$ meter og er bestående af fliser med forskelig farver, disse farver er henholdsvis rød, grøn, blå og lilla, som illustreret på nedenstående figur.

\pgfmathdeclarerandomlist{Colors}{{red}{green}{blue}{purple}}

\begin{center}
\begin{tikzpicture}[scale=0.5]
  \foreach \x in {0,...,19} {
    \foreach \y in {0,...,19} {
      \pgfmathrandomitem{\RandomColor}{Colors} 
      \fill [\RandomColor] (\x,\y) rectangle (\x+1,\y+1);
    }
  }
\end{tikzpicture}
\end{center}

Altså så vi har et kendt kort hvor der er $400$ fliser eller punkter af forskelige farvers, dette kan repræsenteret som vores udfaldsrum $U$, hvor dets elementer er punkter på formen $P = (x,y)$. Dette udfaldsrum er en del af et symmetrisk sandsynlighedsfelt, hvilket betyder at robotten har en lige stor sandsynlighed for at befinde sig på et givent punk. Ud fra dette sandsynlighedsfelt kan vi definere en stokastisk variabel $X$ som kan tage hvilket som helst Punkt i udfaldsrummet $U$, hvor $x_i$ er et konkrete punkt. Følgende nedenstående trin er derfor involverede i at lokalisere robotten på kortet.

\begin{enumerate}
  \item Først bestemmes et sæt af stokastisk variabler $X$, som er punkter på formen $(x,y)$ i udfaldsrummet $U$ med højst koncentration omkring de punkter med lavest afvigelse fra målingen $m$

  \item Robotten laver en måling $m$ på formen $(r,g,b)$ på dens nuværende position

  \item Da laves nu en vægtede liste af fejlen mellem $m$ og $rgb(X)$ og punkterne $X$

  \item n antal punkter fjernes
\end{enumerate}

\section{implementering}

\end{document}
